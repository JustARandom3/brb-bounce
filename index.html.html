<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BRB Bounce</title>
<style>
  body {
    margin: 0;
    box-sizing: border-box;
    overflow: hidden;
    background: transparent;
  }

  #fill {
    height: 100vh;
    width: 100vw;
  }

  #logo {
    position: absolute;
    left: 0;
    top: 0;
    height: 10vh;
    width: 15vw;
    background-repeat: no-repeat;
    background-size: 150px;
    background-position: center;

    /* Mask image */
    mask: url("http://i.imgur.com/91mEiCH.png");
    -webkit-mask-image: url("http://i.imgur.com/91mEiCH.png");
    mask-size: 100% 100%;
    -webkit-mask-size: 100% 100%;
  }
</style>
</head>

<body>
  <div id="fill">
    <div id="logo"></div>
  </div>

<script>
  let x = 0,
      y = 0,
      dirX = 1,
      dirY = 1;

  // === Converted Pogly variables ===
  const speed = 20;
  const palette = ["#ff8800", "#e124ff", "#6a19ff", "#ff2188"];
  const play = true;
  // =================================

  const speedFactor = 1080 / document.body.clientHeight;
  const adjustedSpeed = speed / speedFactor;

  const logo = document.getElementById("logo");
  logo.style.backgroundColor = palette[0];

  let prevColorChoiceIndex = 0;

  function getNewRandomColor() {
    const currentPalette = [...palette];
    currentPalette.splice(prevColorChoiceIndex, 1);

    const colorChoiceIndex = Math.floor(Math.random() * currentPalette.length);
    prevColorChoiceIndex =
      colorChoiceIndex < prevColorChoiceIndex
        ? colorChoiceIndex
        : colorChoiceIndex + 1;

    return currentPalette[colorChoiceIndex];
  }

  function animate() {
    const screenHeight = document.body.clientHeight;
    const screenWidth = document.body.clientWidth;

    const logoWidth = logo.clientWidth;
    const logoHeight = logo.clientHeight;

    if (y + logoHeight >= screenHeight || y < 0) {
      dirY *= -1;
      logo.style.backgroundColor = getNewRandomColor();
    }

    if (x + logoWidth >= screenWidth || x < 0) {
      dirX *= -1;
      logo.style.backgroundColor = getNewRandomColor();
    }

    x += dirX * adjustedSpeed;
    y += dirY * adjustedSpeed;

    logo.style.left = x + "px";
    logo.style.top = y + "px";

    requestAnimationFrame(animate);
  }

  if (play) {
    requestAnimationFrame(animate);
  }
</script>
</body>
</html>
